#计算机网络 

# 一. 物理层基本概念
物理层主要解决连接各类计算机传输媒体上的传输数据比特流，确定传输媒体接口----------**定义标准**
![[01 物理层概念.png]]
主要特性：
- **机械特性**——接口形状、引线数目、引脚数目、排列情况
- **电气特征**——规定传输二进制位时，电压范围、阻抗匹配、传输速率、距离限制
- **功能特征**——某线出现的某一电平表示意义，接口部件的信号线用途
- **规程特征**——又叫过程特性，定义各条物理线路的工作规程和时序关系

# 二. 数据通信基础知识
![[02 数据通信.png]]

上图中，调制解调器把**数字信号**转化成**模拟信号**

- 数据：具有有意义的信息实体。
- 信号：数据的电气、电磁表现，传输过程中的存在形式（数字型号和模拟信号）。
- 信源：产生和发送数据的源头。
- 信宿：接收数据的终点。
- 信道：信号的传输媒介。

-   **模拟信号 (analogous signal)** —— 代表消息的参数的取值是连续的。
-   **数字信号 (digital signal)** —— 代表消息的参数的取值是离散的。

-   **基带信号**（即基本频带信号）—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。
-   基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行**调制** (modulation)。
![[03 调制.png]]
一般一条通信线路包含一条发送信道和接受信道。

## 单工、半双工、双工

**单工通信**：只有一个方向的通信而没有反方向的交互，仅需要一条信道。
![[04 单工.png]]
**半双工通信/双向交替通信**：通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收，需要两条信道。
![[05 半双工.png]]
**全双工通信/双向同时通信**：通信双方可以同时发送和接受信息，也需要两条信道。
![[06 全双工.png]]
严格来说，传输媒体不能和信道划等号。
对于单工传输，传输媒体只包含一个信道，要么是发送信道，要么是接收信道。
![[07 发送.png]]
对于半双工和全双工，传输媒体中要包含两个信道，一个发送信道，另一个是接收信道。
![[08 发送接收.png]]

## 串行传输/并行传输
串行传输（速度慢、费用低、远距离）、并行传输（速度快、费用高、近距离）
**串行传输**：速度慢，费用低，适合远距离

**并行传输**：速度快，费用高，适合近距离，用于计算机内部数据传输
![[09 串行并行.png]]

## 同步通信/异步通信
**同步传输**：在同步传输的模式下，数据的传送是以一个数据区块为单位，因此同步传输又称为区块传输。
在传送数据时，需先送出1个或多个同步字符，再送出整批的数据。
![[10 同步.png]]
**异步传输**：异步传输将比特分成小组进行传送，小组可以是8位的1个字符或更长。发送方可以在任何时刻发送这些比特组，而接收方不知道它们会在什么时候到达。传送数据时，加一个字符起始位和一个字符终止位。
![[11 异步.png]]
## 码元、速率、波特、带宽
-   **码元 (code)** —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。
码元是一个**固定时长**的信号波形（数字脉冲），可以代表多个bit信息；
当码元离散状态有M个时，（M≥2），此为M进制码元。
【**例题1**】01010101 为二进制码元，表示离散状态只有两种。
 - 四进制码元，离散状态有四种；
 - 00、01、10、11 四种高低不同的信号波形速率。

- **数字通信系统数据传输速率的两种表示方法**
1. 码元传输速率，单位波特（Baud），表示1s传输码元数目,
数字信号有多进制和二进制之分，但码元速率与进制数无关，只与码元长度T有关。
2. 信息传输速率，b/s，每秒传输bit数目。

>**关系**：若一个码元携带**n bit的信息量**，则**M Baud**的码元传输速率所对应的信息传输速率为**M×n bit/s**。

- **带宽（Bandwidth）**：
1.**模拟信号系统**中：当输入的信号频率高或低到一定程度，使得系统的输出功率成为输入功率的一半时，最高频率和最低频率间的差值就代表了系统的通频带宽，其单位为赫兹(Hz)。
2.**数字设备**中：表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”/单位时间内通过链路的数量，常用来表示网络的通信线路所能传输数据的能力。 单位是比特每秒(bps)。

# 三. ★奈氏准则、香农定理
失真，指信号传输发生的扭曲。
主要影响因素：**码元传输速率（调制速度）、信号传输距离、噪声干扰、传输媒体质量**。
![[12 失真.png]]

- **码间串扰：**振动频率太高，接收端失去码元之间清晰界限的现象。
![[13 码间串扰.png]]
- **信号带宽：**信道可通过最高频率和最低频率之差，表示信号带宽。

**奈氏准则（奈奎斯特定理）**
理想低通（无噪声、带宽受限）条件下，为避免码间串扰，极限码元传输速率为2W Baud，即：
$${\lim_{noise\to 0}{数据传输速率}}= 2W\log_2V,单位 b/s$$其中：$W$是信道带宽，单位Hz。$V$表示几种码元。
![[14 奈氏准则.png]]
**奈氏准则：**
1. 在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题，使接收端对
码元的完全正确识别成为不可能。
2. 信道的频带越宽（即能通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输。
3. 奈氏准则给出了码元传输速率的限制，但*并没有对信息传输速率给出限制*。
4. 由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特的
信息量，这就需要采用多元制的调制方法。

【**例题2**】在无噪声的情况下，若某通信链路的带宽为3kHz，采用4个相位，每个相位具有4种振幅的QAM调制技术，则该通信链路的最大数据传输率是多少？
信号有4 x 4=16种变化，最大数据传输率=2 x 3k x4=24kb/s。
![[15 香农公式.png]]
**香农定理**
在带宽受限并且有噪音的信道中，为不产生误差，信息的数据传输速率有上限值。
$${\lim_{noise\not=0}{数据传输速率}}= W×\log_2{(1+S/N)},单位b/s$$
其中：W是信道带宽，S/N指信噪比。
**信噪比：信号平均功/噪声平均功率，S/N**，$$信噪比（dB）=10×\log_{10}{(S/N)}$$
**香农定理相关**
1. 信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限就确定了。
3. 只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输。
4. 香农定理得出的为极限信息传输速率，实际信道能达到的传输速率要比它低不少。
5. 从香农定理可以看出，若信道带宽 W 或信噪比 S/N 没有上限（不可能），那么信道的极限信息传输速率也就没有上限。

【**例题3**】 电话系统的典型参数是信道带宽为3000Hz，信噪比为30dB，则该系统最大数据传输速率是多少？
信噪比：$30dB=10log_{10}(S/N)，则S/N=1000。$
信道的极限数据传输速率=$Wlog_2{(1+S/N)}=3000 × log_2(1+1000)≈30kb/s。$

# 四. 编码与调制
**信道**：信号的传输媒介（media）。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条**发送信道和一条接收信道**。

**基带传输和宽带传输的区别**：
- 在传输距离**较近**时，计算机网络采用**基带**传输方式（近距离衰减小，从而信号内容不易发生变化）。
- 在传输距离**较远**时，计算机网络采用**宽带**传输方式（远距离衰减大，即使信号变化大也能最后过滤出来基带信号）。

![[16 编码与调试.png]]



## 1. 数字数据编码数字信号
![[17 四类编码.png]]
1. 非归零编码【Non-Return Zero】
最基础的编码，高1低0，容易实现，但是没有检错，双方**难以保持同步**，并不是很常用）。

2. ★曼彻斯特编码
将一个码元分成两个相等的间隔。前一个间隔为低电平，后一个间隔为高电平表示码元1；码元0则正好相反。也可以采用相反的规定。
该编码的特点是在每一个码元的中间出现电平跳变，位中间的跳变既作时钟信号（可用于同步），又作数据信号，但它**所占的频带宽度是原始的基带宽度的两倍**。 
由于每一个码元都被调成两个电平，所以数据传输速率只有调制速率的1/2。

3. 差分曼彻斯特编码
常用于局域网传输，其规则是：若码元为1，则前半个码元的电平与上一个码元的后半个码元的电平相同，若为0，则相反。该编码
的特点是，在每个码元的中间，都有一次电平的跳转，可以实现自同步，且**抗干扰性强于曼彻斯特编码**。

4. 归零编码【RZ】
信号电平在一个码元之内都要恢复到零的这种编码成编码方式。

5. 4B/5B编码
比特流中插入额外的比特以打破一连串的0或1，就是用5个比特来编码4个比特的数据，之后再传给接收方，因此称为4B/5B。编码效率为80%。
只采用16种对应16种不同的4位码，其他的16种作为控制码（帧的开始和结束，线路的状态信息等）或保留。

## 2. 数字数据调制模拟信号
调制（调制-解调）主要有以下几种：
2ASK（调幅）、2FSK（调频）、2PSK（调相）、QAM（调幅+调相）
![[18 数字数据调制为模拟信号.png]]
【**例题4**】 某通信链路的波特率是1200Baud，采用四个相位，每个相位有4种振幅的QAM调制技术，则该链路的信息传输速率是是多少？
**解答**：
对于每一个相位，每种相位都有4种振幅形式，每个信号都有16种模型，对应16种码元。因此，1Baud=4bit。
注：正交幅度调制(Quadrature Amplitude Modulation)，具体可见：[信号调制原理演示，模拟和数字调制技术大比拼！_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1ZZ4y1n7eL/?spm_id_from=333.788.recommend_more_video.0&vd_source=a7f0d42b9cbd9285a1aa3d740ec1b3af)

## 3. 模拟编码数字信号
计算机内部处理的是二进制数据，处理的都是数字音频，所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列（即实现音频数字化）。

最典型的例子就是对音频信号进行编码的**脉码调制**（PCM，Pulse code modulation），在计算机应用中，能够达到最高保真水平的就是PCM编码，被广泛用于素材保存及音乐欣赏，CD、DVD以及我们常见的 WAV文件中均有应用。它主要包括三步：**抽样、量化、编码。**

1、**抽样**：对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号能无失真地代表被抽样的模拟数据，要使用采样定理进行采样：$$f_{采样频率}≥ 2f_{信号最高频率}$$2、 **量化**：把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量。
3、 **编码**：把量化的结果转换为与之对应的二进制编码。

【**例题5**】为何音频通常的采样是使用44100HZ采样频率？
因为人耳能听到的声音频率范围为20000HZ上限，以两倍于信号频率采样，因此会是44100Hz。

## 4. 模拟数据调制模拟信号
为了实现传输的有效性，可能需要**较高的频率**。
这种调制方式还可以使用**频分复用**技术，充分利用带宽资源。
![[18 频分复用.png]]
在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式；模拟的声音数据是加载到**模拟的载波信号**中传输的。

# 五. 数据交换方式
网络当中的“掌中宝”——大量的路由器互连，完成数据交换。
![[19 三种数据交换方式.png]]

**1、** **电路交换**（circuit switching）
原理：在数据传输期间，源结点与目的结点之间有一条由中间结点构成的专用物理连接线路，在数据传输结束之前，这条线路一直保持。
![[20 电路交换.png]]
主要步骤：**建立连接→通信→释放连接**
**2、** **报文交换**（message switching）
报文：源应用发送的信息主体。
报文(message)是网络中交换与传输的数据单元，即站点一次性要发送的数据块。报文包含了将要发送的完整的数据信息，其长短很不一致，长度不限且可变。

**3、** **分组交换**（packet switching）
分组：大的数据块切割成小的数据块
大多数计算机网络都不能连续地传送任意长的数据，所以实际上网络系统把数据分割成小块，然后逐块地发送，这种小块就称作分组（packet）。
![[21 包交换.png]]
分组交换的**原理**：
分组交换与报文交换的工作方式基本相同，都采用存储转发方式，形式上的主要差别在于，分组交换网中要限制所传输的数据单位的长度，一般选128B。 发送节点首先对从终端设备送来的数据报文进行接收、存储，而后将报文划分成一定长度的分组，并以分组为单位进行传输和交换。接收结点将收到的分组组装成信息或报文。

|      | 电路交换                                                    | 报文交换                                                                               | 分组交换                                                                                                           |
| ---- | ----------------------------------------------------------- | -------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
| 优点 | 独占资源 <br>通信时延小<br>有序传输<br>没有冲突<br>实时性强 | 无需建立连接<br>**存储转发**，动态分配线路<br>线路可靠性高<br>线路利用率较高<br>多目标服务 | 无需建立连接<br>**存储转发**，动态分配线路<br>线路可靠性高<br>线路利用率较高<br>**相对于报文交换，存储管理更加容易。** |
|      | 建立连接时间长<br>线路独占，效率低<br>灵活性差<br>无差错控制能力 |  有存储转发时延<br>报文大小补丁，需要网络节点有较大缓存空间 | 有存储转发时延<br>传输额外信息量<br>乱序到目的主机，需要对分组重新排序重组|

【例题6】比较报文交换和分组交换两种传输方式的耗时。例如：文件大小10kb，传输速率1kbps。
- 报文交换：传输时间$t=10k/1k×3=30s$     ……串行转发方式
- 分组交换：传输时间$t=10/1k×2+10k/1k=10.02s$    ……并行转发方式，假设每个分组10bit。

**数据报**方式为网络层提供无连接服务。发送方可随时发送分组，网络中的结点可随时接收分组。**虚电路**将数据报方式和电路交换方式结合，以发挥两者优点。为**网络层**提供连接服务。源节点与目的结点之间建立一条**逻辑连接**，而非实际物理连接。
![[22 数据报和虚电路服务对比.png]]

# 六. 物理层传输介质
传输介质也称**传输媒体/传输媒介**，它就是数据传输系统中在发送设备和接收设备之间的物理通路。
传输媒体并不是物理层。传输媒体在**物理层的下面**，因为物理层是体系结构的**第一层**，因此有时称传输媒体为**0层**。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么意思。
但物理层规定了电气特性，因此能够**识别所传送的比特流**。

## 1. 导向型传输介质
例如：
1. 双绞线
![[23 双绞线.png]]
2. 同轴电缆
![[24 同轴电缆.png]]
3. 光纤（带宽很大）
![[25 光纤.png]]
## 2. 非导向型传输介质
1. 无线电波
 ![[26 无线电波.png]]
2.  微波
 ![[27 微波.png]]
3. 红外线与激光。
![[28 红外.png]]

# 七. 物理层设备
1. 中继器（RP repeater）
对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络的长度。
中继器两端的网段一定要是**同一个协议**。

2. 集线器（多口中继器 Hub）
对信号进行再生**放大转发**，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。不具备信号的定向传送能力，是一个**共享式设备**。